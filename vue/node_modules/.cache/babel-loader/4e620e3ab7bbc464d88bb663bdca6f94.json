{"remainingRequest":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\babel-loader\\lib\\index.js!E:\\GitHub\\smart-hotel\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\GitHub\\smart-hotel\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\GitHub\\smart-hotel\\vue\\src\\views\\Engineer.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\GitHub\\smart-hotel\\vue\\src\\views\\Engineer.vue","mtime":1677823056453},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdFbmdpbmVlcicsCiAgY29tcG9uZW50czoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBkcmF3ZXI6IGZhbHNlLAogICAgICBzZWFyY2g6ICcnLAogICAgICBzZWFyY2hTdGF0ZTogJzAnLAogICAgICBmb3JtOiB7CiAgICAgICAgcm9vbUlkOiAnJywKICAgICAgICB1c2VySWQ6ICcnLAogICAgICAgIHRleHQ6ICcnLAogICAgICAgIGVuZ2luZWVySWQ6ICcnCiAgICAgIH0sCiAgICAgIHVzZXJmb3JtOiB7fSwKICAgICAgZW5naW5lZXJmb3JtOiB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIGVuZ2luZWVySWQ6ICcnLAogICAgICAgIHN0YXRlOiAnJwogICAgICB9LAogICAgICByb29tOiBbXSwKICAgICAgZW5naW5lZXJzOiBbXSwKICAgICAgY29udHJhY3Q6IFtdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICdmb3JtLnJvb21JZCc6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLmZpbmRSb29tKHZhbCk7CiAgICAgIH0KICAgIH0sCiAgICBkZWVwOiB0cnVlLAogICAgaW1tZWRpYXRlOiB0cnVlCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIHN0ciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSB8fCAie30iOwogICAgdGhpcy51c2VyZm9ybSA9IEpTT04ucGFyc2Uoc3RyKTsKICAgIHRoaXMuZmluZGFsbCgpOwogICAgdGhpcy5maW5kYWxsZW5naW5lZXIoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZpbmRhbGw6IGZ1bmN0aW9uIGZpbmRhbGwoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICByZXF1ZXN0LmdldCgiL2VuZ2luZWVyL2FsbCIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2VOdW06IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwKICAgICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2gsCiAgICAgICAgICBzdGF0ZTogdGhpcy5zZWFyY2hTdGF0ZSwKICAgICAgICAgIGFkbWluSWQ6IHRoaXMudXNlcmZvcm0uaWQKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy5jb250cmFjdCA9IHJlcy5kYXRhLnJlY29yZHM7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgfSk7CiAgICB9LAogICAgZmluZFJvb206IGZ1bmN0aW9uIGZpbmRSb29tKGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coaWQpOwogICAgICByZXF1ZXN0LmdldCgiL3Jvb20vIiArIGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIucm9vbSA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBmaW5kYWxsZW5naW5lZXI6IGZ1bmN0aW9uIGZpbmRhbGxlbmdpbmVlcigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXF1ZXN0LmdldCgiL2VuZ2luZWVyL2FsbEVuZ2luZWVyIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLmVuZ2luZWVycyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVFZGl0OiBmdW5jdGlvbiBoYW5kbGVFZGl0KHJvdykgewogICAgICB0aGlzLmVuZ2luZWVyZm9ybS5pZCA9IHJvdy5pZDsKICAgICAgdGhpcy5lbmdpbmVlcmZvcm0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJvdykpOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIHVwZGF0ZUVkaXQ6IGZ1bmN0aW9uIHVwZGF0ZUVkaXQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5lbmdpbmVlcmZvcm0uc3RhdGUgPSAnMSc7CiAgICAgIHJlcXVlc3QucHV0KCIvZW5naW5lZXIvdXBkYXRlIiwgdGhpcy5lbmdpbmVlcmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICBfdGhpczQuJG1lc3NhZ2Uuc3VjY2Vzcygi5pu05paw57u05L+u54q25oCB5oiQ5YqfIik7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmZpbmRhbGwoKTsKICAgIH0sCiAgICBvdmVyRWRpdDogZnVuY3Rpb24gb3ZlckVkaXQocm93KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy5lbmdpbmVlcmZvcm0uaWQgPSByb3cuaWQ7CiAgICAgIHRoaXMuZW5naW5lZXJmb3JtLnN0YXRlID0gJzInOwogICAgICByZXF1ZXN0LnB1dCgiL2VuZ2luZWVyL3VwZGF0ZSIsIHRoaXMuZW5naW5lZXJmb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgewogICAgICAgICAgX3RoaXM1LiRtZXNzYWdlLnN1Y2Nlc3MoIuabtOaWsOe7tOS/rueKtuaAgeaIkOWKnyIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuZmluZGFsbCgpOwogICAgfSwKICAgIG9uSW5wdXQ6IGZ1bmN0aW9uIG9uSW5wdXQoKSB7CiAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICB9LAogICAgc2F2ZUVuZ2luZWVyczogZnVuY3Rpb24gc2F2ZUVuZ2luZWVycygpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLmZvcm0udXNlcklkID0gdGhpcy51c2VyZm9ybS5pZDsKICAgICAgcmVxdWVzdC5wb3N0KCIvZW5naW5lZXIvYWRkIiwgdGhpcy5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgewogICAgICAgICAgX3RoaXM2LiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAi5oql5L+u5oiQ5YqfIgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzNi4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuZHJhd2VyID0gZmFsc2U7CiAgICAgIHRoaXMuZmluZGFsbCgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["E:\\GitHub\\smart-hotel\\vue\\src\\views\\Engineer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n    <!--    搜索区域-->\n    <div style=\"margin: 10px 0\">\n      <el-divider content-position=\"left\">查询条件</el-divider>\n      <span>报修内容：</span><el-input v-model=\"search\" placeholder=\"请输入报修内容\" style=\"width: 30%\" clearable></el-input>\n      <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"findall\">查询<i class=\"el-icon-search el-icon--right\"></i></el-button>\n      <el-button @click=\"drawer = true\" type=\"primary\" style=\"margin-left: 16px;\">\n        用户报修\n      </el-button>\n    </div>\n\n    <el-divider content-position=\"left\">报修列表</el-divider>\n    <el-tabs v-model=\"searchState\" type=\"card\" @tab-click=\"findall\">\n      <el-tab-pane label=\"未分配维修员\" name=\"0\"></el-tab-pane>\n      <el-tab-pane label=\"维修未完成\" name=\"1\"></el-tab-pane>\n      <el-tab-pane label=\"维修已完成\" name=\"2\"></el-tab-pane>\n    </el-tabs>\n    <el-table\n    :data=\"contract\"\n    border\n    stripe\n    style=\"width: 100%\">\n    <el-table-column\n      fixed\n      prop=\"id\"\n      label=\"ID\"\n      width=\"100\"\n      sortable>\n    </el-table-column>\n    <el-table-column\n      prop=\"userName\"\n      label=\"报修人\">\n    </el-table-column>\n    <el-table-column\n      prop=\"text\"\n      label=\"报修内容\">\n    </el-table-column>\n    <el-table-column\n      prop=\"createTime\"\n      label=\"报修时间\"\n      width=\"150\">\n    </el-table-column>\n    <el-table-column\n      prop=\"finishTime\"\n      label=\"结束时间\"\n      width=\"150\">\n    </el-table-column>\n    <el-table-column\n      prop=\"adminName\"\n      label=\"管理员\">\n    </el-table-column>\n    <el-table-column\n      prop=\"apartmentName\"\n      label=\"酒店名\">\n    </el-table-column>\n    <el-table-column\n      prop=\"roomName\"\n      label=\"房间号\">\n    </el-table-column>\n    <el-table-column\n      prop=\"engineerName\"\n      label=\"维修员\">\n    </el-table-column>\n    <el-table-column label=\"操作\" width=\"240\">\n        <template #default=\"scope\">\n          <el-button v-if=\"scope.row.state === 0 && (userform.roles[0] === 1 || userform.roles[0] === 4)\" size=\"mini\" type=\"primary\" plain @click=\"handleEdit(scope.row)\">分配维修员</el-button>\n          <el-popconfirm title=\"确定结束维修吗？\"  v-if=\"scope.row.state != 2 && (userform.roles[0] === 1 || userform.roles[0] === 3)\" @confirm=\"overEdit(scope.row)\">\n            <template #reference>\n              <el-button size=\"mini\" type=\"primary\" plain>结束维修</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n  <div style=\"margin: 10px 0\">\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage\"\n          :page-sizes=\"[5, 10, 20]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n  </div>\n\n <el-drawer\n  title=\"用户报修中心\"\n  :before-close=\"handleClose\"\n  v-model=\"drawer\"\n  direction=\"rtl\"\n  size=\"60%\"\n  custom-class=\"demo-drawer\"\n  ref=\"drawer\"\n  >\n      <el-card>\n        <el-form ref=\"form\" :model=\"form\" label-width=\"120px\">\n          <el-form-item label=\"用户报修中心\">\n          </el-form-item>\n          <el-form-item label=\"报修原因填写\">\n            <el-input\n                type=\"textarea\"\n                :autosize=\"{ minRows: 2, maxRows: 4}\"\n                placeholder=\"请输入内容\"\n                v-model=\"form.text\"></el-input>\n          </el-form-item>\n        </el-form>\n        <div style=\"text-align: center\">\n          <el-button type=\"primary\" style=\"width: 80%; margin: 10px\" @click=\"saveEngineers\">报  修</el-button>\n        </div>\n      </el-card>\n  </el-drawer>\n\n  <el-dialog title=\"报修\" v-model=\"dialogVisible\" width=\"30%\">\n      <el-form :model=\"engineerform\" label-width=\"120px\">\n        <el-form-item label=\"选择维修人员\">\n            <el-select v-model=\"engineerform.engineerId\" \n              placeholder=\"试试搜索：用户名\"\n              :options=\"options\"\n              filterable\n              style=\"width: 90%; margin: 10px\">\n              <el-option v-for=\"item in this.engineers\" :key=\"item.id\" :label=\"item.nickname\" :value=\"item.id\"></el-option>\n            </el-select>\n          </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"updateEdit\">确 定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\n  export default {\n    name: 'Engineer',\n    components: {},\n    data() {\n      return {\n        dialogVisible: false,\n        loading: true,\n        drawer: false,\n        search: '',\n        searchState: '0',\n        form: {\n          roomId: '',\n          userId: '',\n          text: '',\n          engineerId: ''\n        },\n\n        userform: {},\n        engineerform: {\n          id: '',\n          engineerId: '',\n          state: '',\n        },\n        room:[],\n        engineers: [],\n        contract: [],\n      }\n    },\n    watch: {\n      'form.roomId':{\n        handler(val){\n          this.findRoom(val)\n        },\n      },\n      deep: true,\n      immediate: true\n    },\n    created() {\n      let str = sessionStorage.getItem(\"user\") || \"{}\"\n      this.userform = JSON.parse(str)\n      this.findall();\n      this.findallengineer();\n    },\n    methods: {\n      findall(){\n        this.loading = true\n          request.get(\"/engineer/all\", {\n            params: {\n              pageNum: this.currentPage,\n              pageSize: this.pageSize,\n              search: this.search,\n              state: this.searchState,\n              adminId: this.userform.id                                                                                                                                                                                                                                                                                                    \n            }\n          }).then(res => {\n            this.loading = false\n            this.contract = res.data.records\n            this.total = res.data.total\n          })\n      },\n      findRoom(id){\n        console.log(id)\n        request.get(\"/room/\"+id).then(res => {\n             this.room = res.data\n          })\n      },\n      findallengineer(){\n        request.get(\"/engineer/allEngineer\").then(res => {\n             this.engineers = res.data\n          })\n      },\n      handleEdit(row) {\n        this.engineerform.id = row.id\n        this.engineerform = JSON.parse(JSON.stringify(row))\n        this.dialogVisible = true\n      },\n      updateEdit(){\n        this.engineerform.state = '1'\n        request.put(\"/engineer/update\", this.engineerform).then(res => {\n          if (res.code === '0') {\n            this.$message.success(\"更新维修状态成功\")\n          }\n          \n        })\n        dialogVisible = false\n        this.findall()\n      },\n      overEdit(row){\n        this.engineerform.id = row.id\n        this.engineerform.state = '2'\n        request.put(\"/engineer/update\", this.engineerform).then(res => {\n          if (res.code === '0') {\n            this.$message.success(\"更新维修状态成功\")\n          }\n        })\n        this.findall()\n      },\n      onInput() {\n        this.$forceUpdate();\n      },\n      saveEngineers(){\n        this.form.userId = this.userform.id\n        request.post(\"/engineer/add\",this.form).then(res => {\n            console.log(res)\n            if (res.code === '0') {\n              this.$message({\n                type: \"success\",\n                message: \"报修成功\"\n              })\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg\n              })\n            }\n        })\n        this.drawer = false\n        this.findall()\n      }\n    }\n  }\n</script>\n\n<style>\n  .el-carousel__item:nth-child(2n) {\n    background-color: #99a9bf;\n  }\n  \n  .el-carousel__item:nth-child(2n+1) {\n    background-color: #d3dce6;\n  }\n  .time {\n    font-size: 13px;\n    color: #999;\n  }\n  \n  .bottom {\n    margin-top: 13px;\n    line-height: 12px;\n  }\n\n  .button {\n    padding: 0;\n    float: right;\n  }\n\n  .image {\n    width: 100%;\n    display: block;\n  }\n\n  .clearfix:before,\n  .clearfix:after {\n      display: table;\n      content: \"\";\n  }\n  \n  .clearfix:after {\n      clear: both\n  }\n</style>\n"],"sourceRoot":""}]}