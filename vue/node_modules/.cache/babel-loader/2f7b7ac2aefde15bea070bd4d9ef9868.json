{"remainingRequest":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\babel-loader\\lib\\index.js!E:\\GitHub\\smart-hotel\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\GitHub\\smart-hotel\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\GitHub\\smart-hotel\\vue\\src\\views\\Contract.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\GitHub\\smart-hotel\\vue\\src\\views\\Contract.vue","mtime":1677826204889},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb250cmFjdCcsCiAgY29tcG9uZW50czoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIGRyYXdlcjogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICByb29tSWQ6ICcnLAogICAgICAgIHVzZXJJZDogJycsCiAgICAgICAgY3JlYXRlVGltZTogJycsCiAgICAgICAgdGVybWluVGltZTogJycsCiAgICAgICAgYXBhcnRtZW50SWQ6ICcnCiAgICAgIH0sCiAgICAgIHNlYXJjaDogJycsCiAgICAgIHVzZXJmb3JtOiB7fSwKICAgICAgdXNlcjoge30sCiAgICAgIHJvb206IHt9LAogICAgICB1c2VyczogW10sCiAgICAgIHJvb21zOiBbXSwKICAgICAgY29udHJhY3Q6IFtdLAogICAgICBydWxlczogewogICAgICAgIHVzZXJJZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeWFpeS9j+S6uicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICByb29tSWQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nmiL/pl7QnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgdGltZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeenn+e6puaXtumVvycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICdmb3JtLnJvb21JZCc6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLmZpbmRSb29tKHZhbCk7CiAgICAgIH0KICAgIH0sCiAgICAnZm9ybS51c2VySWQnOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdGhpcy5maW5kVXNlcih2YWwpOwogICAgICB9CiAgICB9LAogICAgZGVlcDogdHJ1ZSwKICAgIGltbWVkaWF0ZTogdHJ1ZQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBzdHIgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikgfHwgInt9IjsKICAgIHRoaXMudXNlcmZvcm0gPSBKU09OLnBhcnNlKHN0cik7CiAgICB0aGlzLmZpbmRhbGwoKTsKICAgIHRoaXMuZmluZGFsbHVzZXIoKTsKICAgIHRoaXMuZmluZGFsbHJvb20oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZpbmRhbGw6IGZ1bmN0aW9uIGZpbmRhbGwoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICByZXF1ZXN0LmdldCgiL2NvbnRyYWN0L2FsbCIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2VOdW06IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwKICAgICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2gsCiAgICAgICAgICBhZG1pbklkOiB0aGlzLnVzZXJmb3JtLmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXMuY29udHJhY3QgPSByZXMuZGF0YS5yZWNvcmRzOwogICAgICAgIF90aGlzLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgIH0pOwogICAgfSwKICAgIGZpbmRSb29tOiBmdW5jdGlvbiBmaW5kUm9vbShpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKGlkKTsKICAgICAgcmVxdWVzdC5nZXQoIi9yb29tLyIgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLnJvb20gPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgZmluZFVzZXI6IGZ1bmN0aW9uIGZpbmRVc2VyKGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coaWQpOwogICAgICByZXF1ZXN0LmdldCgiL3VzZXIvIiArIGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczMudXNlciA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBmaW5kYWxsdXNlcjogZnVuY3Rpb24gZmluZGFsbHVzZXIoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmVxdWVzdC5nZXQoIi9jb250cmFjdC9hbGx1c2VyIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXM0LnVzZXJzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGZpbmRhbGxyb29tOiBmdW5jdGlvbiBmaW5kYWxscm9vbSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXF1ZXN0LmdldCgiL2NvbnRyYWN0L2FsbHJvb20vIiArIHRoaXMudXNlcmZvcm0uaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNS5yb29tcyA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlQ29udHJhY3Q6IGZ1bmN0aW9uIHNhdmVDb250cmFjdCgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLmZvcm0uY3JlYXRlVGltZSA9IHRoaXMuZm9ybS50aW1lWzBdOwogICAgICB0aGlzLmZvcm0udGVybWluVGltZSA9IHRoaXMuZm9ybS50aW1lWzFdOwogICAgICB0aGlzLmZvcm0uYWRtaW5JZCA9IHRoaXMudXNlcmZvcm0uaWQ7CiAgICAgIHJlcXVlc3QucG9zdCgiL2NvbnRyYWN0L2FkZCIsIHRoaXMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsKICAgICAgICAgIF90aGlzNi4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgbWVzc2FnZTogIuS4i+WNleaIkOWKnyIKICAgICAgICAgIH0pOwoKICAgICAgICAgIHdpbmRvdy5vcGVuKHJlcy5kYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXM2LiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZShpZCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHJlcXVlc3QuZGVsZXRlKCIvY29udHJhY3QvIiArIGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgewogICAgICAgICAgX3RoaXM3LiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5YqfIgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzNy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXM3LmZpbmRhbGwoKTsgLy8g5Yig6Zmk5LmL5ZCO6YeN5paw5Yqg6L296KGo5qC855qE5pWw5o2uCgogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["E:\\GitHub\\smart-hotel\\vue\\src\\views\\Contract.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n    <!--    搜索区域-->\n    <div style=\"margin: 10px 0\">\n      <el-divider content-position=\"left\">查询条件</el-divider>\n      <span>下单客户用户名：</span><el-input v-model=\"search\" placeholder=\"请输入下单客户用户名\" style=\"width: 30%\" clearable></el-input>\n      <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"findall\">查询<i class=\"el-icon-search el-icon--right\"></i></el-button>\n      <el-button @click=\"drawer = true\" type=\"primary\" style=\"margin-left: 16px;\">\n        用户下单\n      </el-button>\n    </div>\n\n    <el-divider content-position=\"left\">合约列表</el-divider>\n    <el-table\n    :data=\"contract\"\n    border\n    stripe\n    style=\"width: 100%\">\n    <el-table-column\n      fixed\n      prop=\"conId\"\n      label=\"ID\"\n      width=\"100\"\n      sortable>\n    </el-table-column>\n    <el-table-column\n      prop=\"userName\"\n      label=\"下单用户\"\n      width=\"100\">\n    </el-table-column>\n    <el-table-column\n      prop=\"createTime\"\n      label=\"下单时间\"\n      width=\"200\">\n    </el-table-column>\n    <el-table-column\n      prop=\"terminTime\"\n      label=\"解约时间\"\n      width=\"200\">\n    </el-table-column>\n    <el-table-column\n      prop=\"adminName\"\n      label=\"下单方\"\n      width=\"100\">\n    </el-table-column>\n    <el-table-column\n      prop=\"apartmentName\"\n      label=\"下单酒店\"\n      width=\"200\">\n    </el-table-column>\n    <el-table-column\n      prop=\"roomName\"\n      label=\"下单房间\">\n    </el-table-column>\n    <el-table-column label=\"操作\" width=\"400\">\n        <template #default=\"scope\">\n          <el-popconfirm title=\"确定解约吗？\" @confirm=\"handleDelete(scope.row.conId)\">\n            <template #reference>\n              <el-button size=\"mini\" type=\"danger\">解约</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n  </el-table>\n\n  <div style=\"margin: 10px 0\">\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage\"\n          :page-sizes=\"[5, 10, 20]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n  </div>\n\n  <el-drawer\n  title=\"用户下单中心\"\n  :before-close=\"handleClose\"\n  v-model=\"drawer\"\n  direction=\"rtl\"\n  size=\"60%\"\n  custom-class=\"demo-drawer\"\n  ref=\"drawer\"\n  >\n      <el-card>\n        <el-form ref=\"form\" :model=\"form\" label-width=\"120px\" :rules=\"rules\">\n          <el-form-item label=\"下单中心\">\n          </el-form-item>\n          <el-form-item label=\"选择下单用户\">\n            <el-select v-model=\"form.userId\" \n              placeholder=\"试试搜索：用户名\"\n              :options=\"options\"\n              filterable\n              style=\"width: 90%; margin: 10px\">\n              <el-option v-for=\"item in this.users\" :key=\"item.id\" :label=\"item.truename\" :value=\"item.id\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"选择房间\">\n            <el-select v-model=\"form.roomId\" \n              placeholder=\"试试搜索：房间号\"\n              :options=\"options\"\n              filterable\n              style=\"width: 90%; margin: 10px\">\n              <el-option v-for=\"item in this.rooms\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"选择租约时间:\">\n            <el-date-picker style=\"width: 90%; margin: 10px\"\n              v-model=\"form.time\"\n              type=\"datetimerange\"\n              value-format=\"YYYY-MM-DD HH:mm:ss\"\n              range-separator=\"至\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              align=\"right\">\n            </el-date-picker>\n          </el-form-item>\n        </el-form>\n        <div style=\"text-align: center\">\n          <el-button type=\"primary\" style=\"width: 80%; margin: 10px\" @click=\"saveContract\">签   约</el-button>\n        </div>\n      </el-card>\n    <div style=\"width: 100%;height:10px\"></div>\n      <el-card>\n        <el-image\n          style=\"width: 100px; height: 100px\"\n          :src=\"this.room.pic\"\n          :preview-src-list=\"[this.room.pic]\">\n          >\n        </el-image>\n          <div style=\"padding: 14px;\">\n            <span>房间名：{{ this.room.name }}</span>\n            <br>\n            <span>房间价格：{{ this.room.price }} 元/天</span>\n            <br>\n            <span>所属酒店：{{ this.room.apartmentName }}</span>\n            <br>\n          </div>\n      </el-card>\n      <div style=\"width: 100%;height:10px\"></div>\n      <el-card>\n        <el-image\n          style=\"width: 60px; height: 60px; border-radius: 50%\"\n          :src=\"this.user.avatar\"\n          :preview-src-list=\"[this.user.avatar]\">\n          >\n        </el-image>\n          <div style=\"padding: 14px;\">\n            <span>下单人姓名：{{ this.user.truename }}</span>\n            <br>\n            <span>下单人身份证号：{{ this.user.idcode }}</span>\n            <br>\n            <span>下单人电话：{{ this.user.telephone }}</span>\n            <br>\n          </div>\n      </el-card>\n  </el-drawer>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\n  export default {\n    name: 'Contract',\n    components: {},\n    data() {\n      return {\n        loading: true,\n        drawer: false,\n        form: {\n          roomId: '',\n          userId: '',\n          createTime: '',\n          terminTime: '',\n          apartmentId: ''\n        },\n        search: '',\n        userform: {},\n        user:{},\n        room:{},\n        users: [],\n        rooms: [],\n        contract: [],\n        rules: {\n          userId: [\n            {required: true, message: '请选择入住人', trigger: 'blur'},\n          ],\n          roomId: [\n            {required: true, message: '请选择房间', trigger: 'blur'},\n          ],\n          time: [\n            {required: true, message: '请选择租约时长', trigger: 'blur'},\n          ], \n        },\n      }\n    },\n    watch: {\n      'form.roomId':{\n        handler(val){\n          this.findRoom(val)\n        },\n      },\n      'form.userId':{\n        handler(val){\n          this.findUser(val)\n        },\n      },\n      deep: true,\n      immediate: true\n    },\n    created() {\n      let str = sessionStorage.getItem(\"user\") || \"{}\"\n      this.userform = JSON.parse(str)\n      this.findall();\n      this.findalluser();\n      this.findallroom();\n    },\n    methods: {\n      findall(){\n        this.loading = true\n          request.get(\"/contract/all\", {\n            params: {\n              pageNum: this.currentPage,\n              pageSize: this.pageSize,\n              search: this.search,\n              adminId: this.userform.id                                                                                                                                                                                                                                                                                                    \n            }\n          }).then(res => {\n            this.loading = false\n            this.contract = res.data.records\n            this.total = res.data.total\n          })\n      },\n      findRoom(id){\n        console.log(id)\n        request.get(\"/room/\"+id).then(res => {\n             this.room = res.data\n          })\n      },\n      findUser(id){\n        console.log(id)\n        request.get(\"/user/\"+id).then(res => {\n             this.user = res.data\n          })\n      },\n      findalluser(){\n        request.get(\"/contract/alluser\").then(res => {\n             this.users = res.data\n          })\n      },\n      findallroom(){\n        request.get(\"/contract/allroom/\"+this.userform.id).then(res => {\n             this.rooms = res.data\n          })\n      },\n      saveContract(){\n        this.form.createTime = this.form.time[0]\n        this.form.terminTime = this.form.time[1]\n        this.form.adminId = this.userform.id\n        request.post(\"/contract/add\",this.form).then(res => {\n            if (res.code === '0') {\n              this.$message({\n                type: \"success\",\n                message: \"下单成功\"\n              })\n              window.open(res.data)\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg\n              })\n            }\n        })\n      },\n      handleDelete(id) {\n        request.delete(\"/contract/\" + id).then(res => {\n          if (res.code === '0') {\n            this.$message({\n              type: \"success\",\n              message: \"删除成功\"\n            })\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            })\n          }\n          this.findall()  // 删除之后重新加载表格的数据\n        })\n      },\n    }\n  }\n</script>\n\n<style>\n  .el-carousel__item:nth-child(2n) {\n    background-color: #99a9bf;\n  }\n  \n  .el-carousel__item:nth-child(2n+1) {\n    background-color: #d3dce6;\n  }\n  .time {\n    font-size: 13px;\n    color: #999;\n  }\n  \n  .bottom {\n    margin-top: 13px;\n    line-height: 12px;\n  }\n\n  .button {\n    padding: 0;\n    float: right;\n  }\n\n  .image {\n    width: 100%;\n    display: block;\n  }\n\n  .clearfix:before,\n  .clearfix:after {\n      display: table;\n      content: \"\";\n  }\n  \n  .clearfix:after {\n      clear: both\n  }\n</style>\n"],"sourceRoot":""}]}