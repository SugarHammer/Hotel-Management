{"remainingRequest":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\babel-loader\\lib\\index.js!E:\\GitHub\\smart-hotel\\vue\\src\\utils\\permission.js","dependencies":[{"path":"E:\\GitHub\\smart-hotel\\vue\\src\\utils\\permission.js","mtime":1653969029000},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwppbXBvcnQgTGF5b3V0IGZyb20gIkAvbGF5b3V0L0xheW91dCI7IC8vIOazqOaEj++8mui/meS4quaWh+S7tuaYr+iuvue9ruWKqOaAgei3r+eUseeahAovLyBwZXJtaXNzaW9uc+aYr+S4gOS4qui1hOa6kOeahOaVsOe7hAoKZXhwb3J0IGZ1bmN0aW9uIGFjdGl2ZVJvdXRlcigpIHsKICB2YXIgdXNlclN0ciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKTsKCiAgaWYgKHVzZXJTdHIpIHsKICAgIHZhciB1c2VyID0gSlNPTi5wYXJzZSh1c2VyU3RyKTsKICAgIHZhciByb290ID0gewogICAgICBwYXRoOiAnL2hpbmRleCcsCiAgICAgIG5hbWU6ICdMYXlvdXQnLAogICAgICBjb21wb25lbnQ6IExheW91dCwKICAgICAgcmVkaXJlY3Q6ICIvaGluZGV4IiwKICAgICAgY2hpbGRyZW46IFtdCiAgICB9OwogICAgdXNlci5wZXJtaXNzaW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7CiAgICAgIGlmIChwLmNoaWxkcmVuTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgcC5jaGlsZHJlbkxpc3QuZm9yRWFjaChmdW5jdGlvbiAoYykgewogICAgICAgICAgdmFyIGNvYmogPSB7CiAgICAgICAgICAgIHBhdGg6IGMucGF0aCwKICAgICAgICAgICAgbmFtZTogYy5jb21tZW50LAogICAgICAgICAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgICAgICAgICByZXR1cm4gaW1wb3J0KCJAL3ZpZXdzLyIgKyBjLm5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgcm9vdC5jaGlsZHJlbi5wdXNoKGNvYmopOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICBwYXRoOiBwLnBhdGgsCiAgICAgICAgICBuYW1lOiBwLmNvbW1lbnQsCiAgICAgICAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgICAgICAgcmV0dXJuIGltcG9ydCgiQC92aWV3cy8iICsgcC5uYW1lKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJvb3QuY2hpbGRyZW4ucHVzaChvYmopOwogICAgICB9CiAgICB9KTsKCiAgICBpZiAocm91dGVyKSB7CiAgICAgIHJvdXRlci5hZGRSb3V0ZShyb290KTsKICAgIH0KICB9Cn0="},{"version":3,"sources":["E:/GitHub/smart-hotel/vue/src/utils/permission.js"],"names":["router","Layout","activeRouter","userStr","sessionStorage","getItem","user","JSON","parse","root","path","name","component","redirect","children","permissions","forEach","p","childrenList","length","c","cobj","comment","push","obj","addRoute"],"mappings":";;;;;AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,MAAP,MAAmB,iBAAnB,C,CAEA;AACA;;AACA,OAAO,SAASC,YAAT,GAAwB;AAC3B,MAAMC,OAAO,GAAGC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAhB;;AACA,MAAIF,OAAJ,EAAa;AACT,QAAMG,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWL,OAAX,CAAb;AACA,QAAIM,IAAI,GAAG;AACPC,MAAAA,IAAI,EAAE,SADC;AAEPC,MAAAA,IAAI,EAAE,QAFC;AAGPC,MAAAA,SAAS,EAAEX,MAHJ;AAIPY,MAAAA,QAAQ,EAAE,SAJH;AAKPC,MAAAA,QAAQ,EAAC;AALF,KAAX;AAOAR,IAAAA,IAAI,CAACS,WAAL,CAAiBC,OAAjB,CAAyB,UAAAC,CAAC,EAAI;AAC1B,UAAGA,CAAC,CAACC,YAAF,CAAeC,MAAf,GAAwB,CAA3B,EAA6B;AACzBF,QAAAA,CAAC,CAACC,YAAF,CAAeF,OAAf,CAAuB,UAAAI,CAAC,EAAI;AACxB,cAAIC,IAAI,GAAG;AACPX,YAAAA,IAAI,EAAEU,CAAC,CAACV,IADD;AAEPC,YAAAA,IAAI,EAAES,CAAC,CAACE,OAFD;AAGPV,YAAAA,SAAS,EAAE;AAAA,qBAAM,OAAO,aAAaQ,CAAC,CAACT,IAAtB,CAAN;AAAA;AAHJ,WAAX;AAKAF,UAAAA,IAAI,CAACK,QAAL,CAAcS,IAAd,CAAmBF,IAAnB;AACH,SAPD;AAQH,OATD,MAUK;AACD,YAAIG,GAAG,GAAG;AACNd,UAAAA,IAAI,EAAEO,CAAC,CAACP,IADF;AAENC,UAAAA,IAAI,EAAEM,CAAC,CAACK,OAFF;AAGNV,UAAAA,SAAS,EAAE;AAAA,mBAAM,OAAO,aAAaK,CAAC,CAACN,IAAtB,CAAN;AAAA;AAHL,SAAV;AAKAF,QAAAA,IAAI,CAACK,QAAL,CAAcS,IAAd,CAAmBC,GAAnB;AACH;AACJ,KAnBD;;AAoBA,QAAIxB,MAAJ,EAAY;AACRA,MAAAA,MAAM,CAACyB,QAAP,CAAgBhB,IAAhB;AACH;AACJ;AACJ","sourcesContent":["import router from \"@/router\";\nimport Layout from \"@/layout/Layout\";\n\n// 注意：这个文件是设置动态路由的\n// permissions是一个资源的数组\nexport function activeRouter() {\n    const userStr = sessionStorage.getItem(\"user\")\n    if (userStr) {\n        const user = JSON.parse(userStr)\n        let root = {\n            path: '/hindex',\n            name: 'Layout',\n            component: Layout,\n            redirect: \"/hindex\",\n            children:[]\n        }\n        user.permissions.forEach(p => {\n            if(p.childrenList.length > 0){\n                p.childrenList.forEach(c => {\n                    let cobj = {\n                        path: c.path,\n                        name: c.comment,\n                        component: () => import(\"@/views/\" + c.name),\n                    };\n                    root.children.push(cobj)\n                });\n            }\n            else {\n                let obj = {\n                    path: p.path,\n                    name: p.comment,\n                    component: () => import(\"@/views/\" + p.name),\n                };\n                root.children.push(obj)\n            }\n        })\n        if (router) {\n            router.addRoute(root)\n        }\n    }\n}\n\n\n"]}]}