{"remainingRequest":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\babel-loader\\lib\\index.js!E:\\GitHub\\smart-hotel\\vue\\src\\router\\index.js","dependencies":[{"path":"E:\\GitHub\\smart-hotel\\vue\\src\\router\\index.js","mtime":1653969029000},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\GitHub\\smart-hotel\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgeyBjcmVhdGVSb3V0ZXIsIGNyZWF0ZVdlYkhpc3RvcnkgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IExheW91dCBmcm9tICJAL2xheW91dC9MYXlvdXQiOwp2YXIgcm91dGVzID0gW3sKICBwYXRoOiAnLycsCiAgbmFtZTogJ2luZGV4JywKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoIkAvdmlld3MvSW5kZXgiKTsKICB9Cn0sIHsKICBwYXRoOiAnL2xvZ2luJywKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgiQC92aWV3cy9Mb2dpbiIpOwogIH0KfSwgewogIHBhdGg6ICcvcmVnaXN0ZXInLAogIG5hbWU6ICdSZWdpc3RlcicsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCJAL3ZpZXdzL1JlZ2lzdGVyIik7CiAgfQp9XTsKdmFyIHJvdXRlciA9IGNyZWF0ZVJvdXRlcih7CiAgaGlzdG9yeTogY3JlYXRlV2ViSGlzdG9yeShwcm9jZXNzLmVudi5CQVNFX1VSTCksCiAgcm91dGVzOiByb3V0ZXMKfSk7IC8vIOWcqOWIt+aWsOmhtemdoueahOaXtuWAmemHjee9ruW9k+WJjei3r+eUsQoKYWN0aXZlUm91dGVyKCk7CgpmdW5jdGlvbiBhY3RpdmVSb3V0ZXIoKSB7CiAgdmFyIHVzZXJTdHIgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIik7CgogIGlmICh1c2VyU3RyKSB7CiAgICB2YXIgdXNlciA9IEpTT04ucGFyc2UodXNlclN0cik7CiAgICB2YXIgcm9vdCA9IHsKICAgICAgcGF0aDogJy9oaW5kZXgnLAogICAgICBuYW1lOiAnTGF5b3V0JywKICAgICAgY29tcG9uZW50OiBMYXlvdXQsCiAgICAgIHJlZGlyZWN0OiAiL2hpbmRleCIsCiAgICAgIGNoaWxkcmVuOiBbXQogICAgfTsKCiAgICBpZiAodXNlci5wZXJtaXNzaW9ucykgewogICAgICB1c2VyLnBlcm1pc3Npb25zLmZvckVhY2goZnVuY3Rpb24gKHApIHsKICAgICAgICBpZiAocC5jaGlsZHJlbkxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgcC5jaGlsZHJlbkxpc3QuZm9yRWFjaChmdW5jdGlvbiAoYykgewogICAgICAgICAgICB2YXIgY29iaiA9IHsKICAgICAgICAgICAgICBwYXRoOiBjLnBhdGgsCiAgICAgICAgICAgICAgbmFtZTogYy5jb21tZW50LAogICAgICAgICAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGltcG9ydCgiQC92aWV3cy8iICsgYy5uYW1lKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJvb3QuY2hpbGRyZW4ucHVzaChjb2JqKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBwYXRoOiBwLnBhdGgsCiAgICAgICAgICAgIG5hbWU6IHAuY29tbWVudCwKICAgICAgICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGltcG9ydCgiQC92aWV3cy8iICsgcC5uYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIHJvb3QuY2hpbGRyZW4ucHVzaChvYmopOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgaWYgKHJvdXRlcikgewogICAgICByb3V0ZXIuYWRkUm91dGUocm9vdCk7CiAgICB9CiAgfQp9Cgpyb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHsKICBpZiAodG8ucGF0aCA9PT0gJy9sb2dpbicgfHwgdG8ucGF0aCA9PT0gJy9yZWdpc3RlcicgfHwgdG8ucGF0aCA9PT0gJy8nKSB7CiAgICBuZXh0KCk7CiAgICByZXR1cm47CiAgfQoKICB2YXIgdXNlciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSA/IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKSA6IHt9OyAvL+i3r+eUseadg+mZkOihqO+8jOS+m+aLpuaIquWZqOaLpuaIquaXoOaViOaIluiAhei2iuadg+eahHVybAoKICB2YXIgcGVybWlzc2lvbkxpc3QgPSBbXTsKCiAgaWYgKHVzZXIucGVybWlzc2lvbnMpIHsKICAgIHVzZXIucGVybWlzc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICBpZiAocC5jaGlsZHJlbkxpc3QubGVuZ3RoID4gMCkgewogICAgICAgIHAuY2hpbGRyZW5MaXN0LmZvckVhY2goZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHBlcm1pc3Npb25MaXN0LnB1c2goYy5wYXRoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwZXJtaXNzaW9uTGlzdC5wdXNoKHAucGF0aCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgaWYgKCF1c2VyLnBlcm1pc3Npb25zIHx8ICF1c2VyLnBlcm1pc3Npb25zLmxlbmd0aCkgewogICAgbmV4dCgnL2xvZ2luJyk7CiAgfSBlbHNlIGlmICghcGVybWlzc2lvbkxpc3QuZmluZChmdW5jdGlvbiAocCkgewogICAgcmV0dXJuIHAgPT09IHRvLnBhdGg7CiAgfSkpIHsKICAgIG5leHQoJy9sb2dpbicpOwogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["E:/GitHub/smart-hotel/vue/src/router/index.js"],"names":["createRouter","createWebHistory","Layout","routes","path","name","component","router","history","process","env","BASE_URL","activeRouter","userStr","sessionStorage","getItem","user","JSON","parse","root","redirect","children","permissions","forEach","p","childrenList","length","c","cobj","comment","push","obj","addRoute","beforeEach","to","from","next","permissionList","find"],"mappings":";;;;;;AAAA,SAAQA,YAAR,EAAsBC,gBAAtB,QAA6C,YAA7C;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEA,IAAMC,MAAM,GAAG,CACX;AACIC,EAAAA,IAAI,EAAE,GADV;AAEIC,EAAAA,IAAI,EAAE,OAFV;AAGIC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,eAAP,CAAN;AAAA;AAHf,CADW,EAMX;AACIF,EAAAA,IAAI,EAAE,QADV;AAEIC,EAAAA,IAAI,EAAE,OAFV;AAGIC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,eAAP,CAAN;AAAA;AAHf,CANW,EAWX;AACIF,EAAAA,IAAI,EAAE,WADV;AAEIC,EAAAA,IAAI,EAAE,UAFV;AAGIC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,kBAAP,CAAN;AAAA;AAHf,CAXW,CAAf;AAmBA,IAAMC,MAAM,GAAGP,YAAY,CAAC;AACxBQ,EAAAA,OAAO,EAAEP,gBAAgB,CAACQ,OAAO,CAACC,GAAR,CAAYC,QAAb,CADD;AAExBR,EAAAA,MAAM,EAANA;AAFwB,CAAD,CAA3B,C,CAKA;;AACAS,YAAY;;AAEZ,SAASA,YAAT,GAAwB;AACpB,MAAMC,OAAO,GAAGC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAhB;;AACA,MAAIF,OAAJ,EAAa;AACT,QAAMG,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWL,OAAX,CAAb;AACA,QAAIM,IAAI,GAAG;AACPf,MAAAA,IAAI,EAAE,SADC;AAEPC,MAAAA,IAAI,EAAE,QAFC;AAGPC,MAAAA,SAAS,EAAEJ,MAHJ;AAIPkB,MAAAA,QAAQ,EAAE,SAJH;AAKPC,MAAAA,QAAQ,EAAC;AALF,KAAX;;AAOA,QAAGL,IAAI,CAACM,WAAR,EAAoB;AAChBN,MAAAA,IAAI,CAACM,WAAL,CAAiBC,OAAjB,CAAyB,UAAAC,CAAC,EAAI;AAC1B,YAAGA,CAAC,CAACC,YAAF,CAAeC,MAAf,GAAwB,CAA3B,EAA6B;AACzBF,UAAAA,CAAC,CAACC,YAAF,CAAeF,OAAf,CAAuB,UAAAI,CAAC,EAAI;AACxB,gBAAIC,IAAI,GAAG;AACPxB,cAAAA,IAAI,EAAEuB,CAAC,CAACvB,IADD;AAEPC,cAAAA,IAAI,EAAEsB,CAAC,CAACE,OAFD;AAGPvB,cAAAA,SAAS,EAAE;AAAA,uBAAM,OAAO,aAAaqB,CAAC,CAACtB,IAAtB,CAAN;AAAA;AAHJ,aAAX;AAKAc,YAAAA,IAAI,CAACE,QAAL,CAAcS,IAAd,CAAmBF,IAAnB;AACH,WAPD;AAQH,SATD,MAUK;AACD,cAAIG,GAAG,GAAG;AACN3B,YAAAA,IAAI,EAAEoB,CAAC,CAACpB,IADF;AAENC,YAAAA,IAAI,EAAEmB,CAAC,CAACK,OAFF;AAGNvB,YAAAA,SAAS,EAAE;AAAA,qBAAM,OAAO,aAAakB,CAAC,CAACnB,IAAtB,CAAN;AAAA;AAHL,WAAV;AAKAc,UAAAA,IAAI,CAACE,QAAL,CAAcS,IAAd,CAAmBC,GAAnB;AACH;AACJ,OAnBD;AAoBH;;AACD,QAAIxB,MAAJ,EAAY;AACRA,MAAAA,MAAM,CAACyB,QAAP,CAAgBb,IAAhB;AACH;AACJ;AACJ;;AAEDZ,MAAM,CAAC0B,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClC,MAAIF,EAAE,CAAC9B,IAAH,KAAY,QAAZ,IAAwB8B,EAAE,CAAC9B,IAAH,KAAY,WAApC,IAAmD8B,EAAE,CAAC9B,IAAH,KAAY,GAAnE,EAAwE;AACpEgC,IAAAA,IAAI;AACJ;AACH;;AACD,MAAIpB,IAAI,GAAGF,cAAc,CAACC,OAAf,CAAuB,MAAvB,IAAiCE,IAAI,CAACC,KAAL,CAAWJ,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAX,CAAjC,GAA8E,EAAzF,CALkC,CAMlC;;AACA,MAAMsB,cAAc,GAAG,EAAvB;;AACA,MAAGrB,IAAI,CAACM,WAAR,EAAoB;AAChBN,IAAAA,IAAI,CAACM,WAAL,CAAiBC,OAAjB,CAAyB,UAAAC,CAAC,EAAI;AAC1B,UAAGA,CAAC,CAACC,YAAF,CAAeC,MAAf,GAAwB,CAA3B,EAA6B;AACzBF,QAAAA,CAAC,CAACC,YAAF,CAAeF,OAAf,CAAuB,UAAAI,CAAC,EAAI;AACxBU,UAAAA,cAAc,CAACP,IAAf,CAAoBH,CAAC,CAACvB,IAAtB;AACH,SAFD;AAGH,OAJD,MAKK;AACDiC,QAAAA,cAAc,CAACP,IAAf,CAAoBN,CAAC,CAACpB,IAAtB;AACH;AACJ,KATD;AAUH;;AACD,MAAI,CAACY,IAAI,CAACM,WAAN,IAAqB,CAACN,IAAI,CAACM,WAAL,CAAiBI,MAA3C,EAAmD;AAC/CU,IAAAA,IAAI,CAAC,QAAD,CAAJ;AACH,GAFD,MAEO,IAAI,CAACC,cAAc,CAACC,IAAf,CAAoB,UAAAd,CAAC;AAAA,WAAIA,CAAC,KAAKU,EAAE,CAAC9B,IAAb;AAAA,GAArB,CAAL,EAA8C;AACjDgC,IAAAA,IAAI,CAAC,QAAD,CAAJ;AACH,GAFM,MAEA;AACHA,IAAAA,IAAI;AACP;AACJ,CA3BD;AA8BA,eAAe7B,MAAf","sourcesContent":["import {createRouter, createWebHistory} from 'vue-router'\nimport Layout from \"@/layout/Layout\";\n\nconst routes = [\n    {\n        path: '/',\n        name: 'index',\n        component: () => import(\"@/views/Index\")\n    },\n    {\n        path: '/login',\n        name: 'Login',\n        component: () => import(\"@/views/Login\")\n    },\n    {\n        path: '/register',\n        name: 'Register',\n        component: () => import(\"@/views/Register\")\n    },\n\n]\n\nconst router = createRouter({\n    history: createWebHistory(process.env.BASE_URL),\n    routes\n})\n\n// 在刷新页面的时候重置当前路由\nactiveRouter()\n\nfunction activeRouter() {\n    const userStr = sessionStorage.getItem(\"user\")\n    if (userStr) {\n        const user = JSON.parse(userStr)\n        let root = {\n            path: '/hindex',\n            name: 'Layout',\n            component: Layout,\n            redirect: \"/hindex\",\n            children:[]\n        }\n        if(user.permissions){\n            user.permissions.forEach(p => {\n                if(p.childrenList.length > 0){\n                    p.childrenList.forEach(c => {\n                        let cobj = {\n                            path: c.path,\n                            name: c.comment,\n                            component: () => import(\"@/views/\" + c.name),\n                        };\n                        root.children.push(cobj)\n                    });\n                }\n                else {\n                    let obj = {\n                        path: p.path,\n                        name: p.comment,\n                        component: () => import(\"@/views/\" + p.name),\n                    };\n                    root.children.push(obj)\n                }\n            })\n        }\n        if (router) {\n            router.addRoute(root)\n        }\n    }\n}\n\nrouter.beforeEach((to, from, next) => {\n    if (to.path === '/login' || to.path === '/register' || to.path === '/') {\n        next()\n        return\n    }\n    let user = sessionStorage.getItem(\"user\") ? JSON.parse(sessionStorage.getItem(\"user\")) : {}\n    //路由权限表，供拦截器拦截无效或者越权的url\n    const permissionList = [];\n    if(user.permissions){\n        user.permissions.forEach(p => {\n            if(p.childrenList.length > 0){\n                p.childrenList.forEach(c => {\n                    permissionList.push(c.path)\n                })\n            }\n            else {\n                permissionList.push(p.path)\n            }\n        });\n    }\n    if (!user.permissions || !user.permissions.length) {\n        next('/login')\n    } else if (!permissionList.find(p => p === to.path)) {\n        next('/login')\n    } else {\n        next()\n    }\n})\n\n\nexport default router\n"]}]}